services:
  - type: web
    name: ifi-essay-gateway
    env: python
    region: oregon
    plan: starter  # $7/month - upgrade to avoid spin-down. Use 'free' for free tier (spins down after 15min idle)
    buildCommand: pip install -r requirements-docker.txt && mkdir -p artifacts outputs data
    startCommand: streamlit run app.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true
    envVars:
      # Required: Google Cloud Vision credentials (as JSON string)
      # Set this in Render dashboard: Paste entire service account JSON as a single-line string
      - key: GOOGLE_CLOUD_VISION_CREDENTIALS_JSON
        sync: false  # Set manually in Render dashboard
      
      # Required: Groq API key for LLM extraction
      # Set this in Render dashboard
      - key: GROQ_API_KEY
        sync: false  # Set manually in Render dashboard
      
      # Streamlit configuration (these are set automatically)
      - key: STREAMLIT_SERVER_PORT
        value: $PORT  # Render provides this automatically
      - key: STREAMLIT_SERVER_ADDRESS
        value: 0.0.0.0
      - key: STREAMLIT_SERVER_HEADLESS
        value: true

